# Mise configuration file
# https://mise.jdx.dev/configuration.html

[tasks.gen-readme]
# Generate README.md based on available libraries
run = "python scripts/generate_files.py --readme"

[tasks.gen-index]
# Generate Repositories/Malys.md with library metadata
run = "python scripts/generate_files.py --index"

[tasks.sync-libs]
# Sync custom libraries from backup to src/
run = "python scripts/sync_custom_libs.py"


# tasks git add and commit and push
[tasks.git]
run = "sleep 7 && git pull&& git add . && git commit -m 'update' && git push"

# Generate both README and index in one command
[tasks.gen-all]
run = "sleep 3 && python scripts/generate_files.py --readme --index"

# Run sync, generate all files, and commit changes
[tasks.publish]
depends = [
    "sync-libs",
    "gen-all",
    "git"
]

# Install Python dependencies
[tasks.install]
run = "pip install -r requirements.txt"